---
# generated by https://github.com/hashicorp/terraform-plugin-docs
page_title: "Securden - Terraform Provider"
subcategory: "Security"
description: |-
  
---

# Securden Provider

This guide will take you through the process of setting up and using Securden PAM as a provider block in Terraform to securely retrieve account credentials, keys, and secrets using APIs.

## Summary of Steps

1. Adding Securden to Terraform
2. Setting Environment Variables
3. Fetch Account Data
4. Accessing Account Data
5. Fetch Multiple Accounts
6. Account Operations

## 1. Adding Securden Provider

```hcl
terraform {
  required_providers {
    securden = {
      source  = "SecurdenDevOps/securden"
    }
  }
}
```

## 2. Setting Environemnt Varibales

### a. Environment Variables Required
### Required

- `server_url` (String) Securden Server URL. Example: https://company.securden.com:5959.
- `authtoken` (String) Securden API Authentication Token.
- `certificate` (String) Securden Server SSL Certificate.

-> Certificate (SSL Certificate) **is Optional**: If an SSL certificate is provided, the connection will strictly use it. If the certificate is incorrect, the connection will be failed. If no certificate is provided, the plugin will attempt to auto-fetch the SSL certificate. If auto-fetch fails, SSL verification will be disabled, and the request will proceed without SSL verification.

### Securden Server URL

> **&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;You can get the ‘server_url’ from Securden by navigating to Admin >> General >> Securden Server Connectivity section in the Securden web interface.**

### API Token for Authentication  

> **&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Securden server supports API token-based authentication for programmatic access to credentials. You can generate and copy the auth token from the Securden web interface by navigating to Admin >> API Access >> Create and Manage API Tokens.**

1. You need to specify the API reference name and description for identification purposes.
2. You need to specify the IP addresses or a range of IP from which this token can be used.
3. You can create a static (with a permanent or a time limited validity) or a dynamic auth token.
4. You can specify the scope of the actions this auth token by selecting the required capabilities from the list.
5. Once the preferences are set, click on Create Token.
6. Now copy the authentication token.


#### i. Terraform Variables

```hcl
variable "server_url" {
    type    = string
    default = "<securden-server-url>"
}

variable "authtoken" {
    type    = string
    default = "<securden-api-authentication-token>"
}
```

#### ii. Setting Environment Variables

Define two variables to store Securden API authentication token and Server URL.

- **Windows**  
```sh
set TF_VAR_authtoken=<authtoken>
set TF_VAR_server_url=<securden-server-url>
# Optional
set TF_VAR_certificate="\path\to\certificate.pem"
```

- **Mac/Linux**  
```sh
export TF_VAR_authtoken=<authtoken>
export TF_VAR_server_url=<securden-server-url>
# Optional
export TF_VAR_certificate="\path\to\certificate.pem"
```


### b. Initializing Securden with Provider Block

```hcl
provider "securden" {
    authtoken  = var.authtoken
    server_url = var.server_url
}
```

## 3. Fetching Account Data

To fetch account data from Securden, use a data block. Here’s an example to fetch account credentials:

```hcl
data "securden_account" "example" {
  account_id = 2000000001800
}
```

> **Note:** You can retrieve specific accounts using `account_id`, `account_name`, or `account_title`. If you use `account_name`, you can also include `account_title` to ensure you don’t retrieve multiple accounts in case there are several accounts with the same name.

## 4. Accessing Account Data

Here are some examples of how to access various credentials from the Securden data block:

- **For Password:** `data.securden_account.example.["password"]`
- **For PuTTY Private Key:** `data.securden_account.example.account["putty_private_key"]`
- **For PuTTY Passphrase:** `data.securden_account.example.account["ppk_passphrase"]`
- **For Additional Fields:** `data.securden_account.example.account["additional-field-name"]`

```hcl
output "example_password" {
    value = data.securden_account.example.["password"]
}
```

### Account Attributes

Here is a list of the account attributes that can be retrieved for use in Terraform using the Securden plugin:

- `account_id`
- `account_name`
- `account_title`
- `password`
- `key_value`
- `private_key`
- `putty_private_key`
- `passphrase`
- `ppk_passphrase`
- `address`
- `client_id`
- `client_secret`
- `account_alias`
- `account_file`
- `default_database`
- `sql_server_port`
- `mysql_port`
- `oracle_sid`
- `oracle_service_name`
- `oracle_port`

> **Note:** Data can only be retrieved for the attributes that are available in the account. If an attribute does not exist, Terraform will return a null value when the code is executed.

## 5. Fetching Multiple Accounts

We can fetch multiple accounts from Securden at once by providing list of account ids to be fetched.

### Example: Fetching Multiple Accounts

```hcl
data "securden_accounts" "many_accounts" {
  account_ids = ["2000000001800", "2000000002801"]
}
```

To retrieve the data of a specific account:

```hcl
output "first_account" {
  value = data.securden_accounts.many_accounts["2000000001800"]["password"]
}
```


## 6. Account Operations

We can perform various account operation where as Add Account, Edit Account and Delete Accounts

### i. Add Account in Securden

For account add operation we will be using `securden_add_account` data block, Example:

```hcl
data "securden_add_account" "added_account"{
    account_name = "Account Name"
    account_title = "Account Title"
    account_type = "Web Account"
}
```

The above are the required fields to add account in Securden. In addition to that there are some other optional fields that can be provided along with your account type and requirements.


#### List of Optional Fields
Here is a list of the account attributes that can be added for add account operation:

- `password`
- `personal_account`
- `ipaddress`
- `folder_id`
- `notes`
- `tags`
- `account_expiration_date`
- `distinguished_name`
- `account_alias`
- `domain_name`

Can view briefly on securden_add_account under Data Source


### ii. Edit Account

To edit the existing account in Securden we will be using `securden_edit_account` data block, Example:

```hcl
data "securden_edit_account" "updated_account"{
    account_id = 2000000001800
    account_type = "Web Account"
    account_title = "Updated Title"
    password = "Changed-TestPasscode@123"
}
```

Here `account_id` and `account_type` are required field and rest of the fields are optional, For detail view see `securden_edit_account` under Data Source.

### iii. Delete Accounts

To delete accounts in Securden we will be using `securden_delete_accounts` data block, Example:

```hcl
data "securden_delete_accounts" "deleted_accounts" {
    account_ids = [2000000001800, 2000000002800]
    reason = "Reason for the account deletion"
}
```

Here `account_ids` alone require field and reason is a optional field, View More in `securden_delete_accounts` under Data Source


---
-> If you have general questions or issues in using Securden Provider, you may raise a support request to devops-support@securden.com. Our support team will get back to you at the earliest and provide a timeline if there are issue fixes involved. 
