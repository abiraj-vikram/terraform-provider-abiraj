---
# generated by https://github.com/hashicorp/terraform-plugin-docs
page_title: "Securden Terraform Provider"
subcategory: "Securden DevOps"
description: |-
  
---

# Securden Provider

# Securden - Terraform Integration

This guide will take you through the process of setting up and using Securden PAM as a provider block in Terraform to securely retrieve account credentials, keys, and secrets using APIs.

## Summary of Steps

1. Adding Securden to Terraform
2. Configuration
3. Fetch Account Data
4. Accessing Account Data
5. Accessing Additional Fields  
6. List of Account Attributes
7. Fetch Multiple Accounts Password


---

## 1. Adding Securden Provider
- **Terraform**
  ```sh
  terraform {
    required_providers {
      securden = {
        source = "SecurdenDevOps/securden"
        version = "1.0.1"
      }
    }
  }

  provider "securden" {
    # Configuration options
  }
  ```

## 2. Configuration

### a. Environment Variables Required

#### i. Terraform Variables
- **Terraform (vars.tf)**
  ```sh
  variable "server_url" {
    type    = string
    default = "<securden-host-url>"
  }

  variable "authtoken" {
    type    = string
    default = "<securden-api-authentication-token>"
  }
  ```

#### ii. Also can set value in terminal as environment variable
Define two variables to store Securden API authentication token and Server URL.

Initialize these variables with the correct values for your environment. For example:

- **Windows**  
  ```sh
  set TF_VAR_authtoken=<authtoken>
  set TF_VAR_server_url=<securden-host-url>
  ```

- **Mac/Linux**  
  ```sh
  export TF_VAR_authtoken=<authtoken>
  export TF_VAR_server_url=<securden-host-url>
  ```
---

### b. Initializing Securden with Provider Block
Define the Securden provider block, referencing the previously declared variables:

```hcl
provider "securden" {
  authtoken = var.authtoken
  server_url = var.server_url
}
```

---

## 3. Fetching Account with Data Block
To fetch account data from Securden, use a data block. Here’s an example to fetch SSH key credentials:

```hcl
data "securden_keyvalue" "ssh" {
  account_id = <account_id>
}
```

> **Note:** You can retrieve specific accounts using `account_id`, `account_name`, or `account_title`. If you use `account_name`, you can also include `account_title` to ensure you don’t retrieve multiple accounts in case there are several accounts with the same name.

---

Setting the variable `sensitive = true` hides the credential value during execution, preventing the credentials from being accidentally displayed in return values or error messages.

---

## 4. Accessing Account Data
Here are some examples of how to access various credentials from the Securden data block:

- **For Password:** `data.securden_keyvalue.ssh.password`  
- **For PuTTY Private Key:** `data.securden_keyvalue.ssh.putty_private_key`  
- **For PuTTY Passphrase:** `data.securden_keyvalue.ssh.ppk_passphrase`  

---

## 5. Accessing Additional Fields
If your account type has additional fields in Securden, you can retrieve the value of additional fields by specifying a `key_field` and `key_value`:

```hcl
data "securden_keyvalue" "ssh" {
  account_id = "2000000002800"
  key_field  = "custom_field"
  key_value  = "field_value"
}
```

---

## 6. Account Attributes
Here is a list of the account attributes that can be retrieved for use in Terraform using the Securden plugin:

- `account_id`
- `account_name`
- `account_title`
- `password`
- `key_value`
- `private_key`
- `putty_private_key`
- `passphrase`
- `ppk_passphrase`
- `address`
- `client_id`
- `client_secret`
- `account_alias`
- `account_file`
- `default_database`
- `sql_server_port`
- `mysql_port`
- `oracle_sid`
- `oracle_service_name`
- `oracle_port`

> **Note:** Data can only be retrieved for the attributes that are available in the account. For any other fields, or if there is a non-existent value, a null value will be returned when the code is executed.

---

## 7. Fetching Multiple Accounts Password
You have the option to fetch account passwords in bulk from Securden at once using a data block.

The major difference between `securden_account` and `securden_passwords` commands is that:
- `securden_account` will raise a request each time it is called by the data block for a single account.
- `securden_passwords` will retrieve multiple account passwords in a single fetch, reducing overall time consumption.

Here’s an example of a data block used to fetch multiple account passwords:

```hcl
data "securden_passwords" "passwords" {
  account_ids = [<list-of_account-ids>]
}
```

Accounts which passwords need to be retrieved can be called by their respective account IDs:

```hcl
data.securden_passwords.passwords["2000000002800"]
```

